/* ============================================
   LOADING INDICATORS - GLOBAL
   ============================================ */

/* Default: sembunyikan semua indicator */
.htmx-indicator,
.htmx-indicator-custom {
    display: none;
}

/* Tampilkan indicator pada button yang sedang request */
button.htmx-request .htmx-indicator,
button.htmx-request .htmx-indicator-custom,
a.htmx-request .htmx-indicator,
a.htmx-request .htmx-indicator-custom {
    display: inline-block;
}

/* Tampilkan indicator pada form yang sedang submit */
form.htmx-request .htmx-indicator,
form.htmx-request .htmx-indicator-custom {
    display: inline-block;
}

/* Special case: elemen yang JADI indicator */
.htmx-request.htmx-indicator {
    display: inline-block;
}

/* ============================================
   HIDE ICONS saat LOADING
   ============================================ */

/* Hide icon pada BUTTON yang sedang request */
button.htmx-request .btn-label > i,
button.htmx-request .btn-label .mdi,
button.htmx-request .save-icon,
button.htmx-request .mdi-plus,
button.htmx-request .mdi-floppy,
button.htmx-request .btn-icon,
button.htmx-request > i.mdi-pencil,
button.htmx-request > i.btn-icon {
    display: none !important;
}

/* Hide icon pada BUTTON SUBMIT saat FORM sedang request */
form.htmx-request button[type="submit"] .btn-label > i,
form.htmx-request button[type="submit"] .save-icon,
form.htmx-request button[type="submit"] .mdi-floppy,
form.htmx-request button[type="submit"] .mdi {
    display: none !important;
}

/* PENTING: Prevent icon hidden saat request BUKAN dari button/form ini */
body.htmx-request:not(.htmx-settling) button:not(.htmx-request) .btn-label > i,
body.htmx-request:not(.htmx-settling) button:not(.htmx-request) .mdi,
body.htmx-request:not(.htmx-settling) form:not(.htmx-request) button[type="submit"] .btn-label > i,
body.htmx-request:not(.htmx-settling) form:not(.htmx-request) button[type="submit"] .save-icon {
    display: inline-block !important;
}

/* ============================================
   LOADING OVERLAY
   ============================================ */

#loading.htmx-indicator {
    opacity: 0;
    visibility: hidden;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.2);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 400ms ease-in-out, visibility 400ms;
}

#loading.show-loading {
    opacity: 1 !important;
    visibility: visible !important;
}

/* ============================================
   LOADER ANIMATION
   ============================================ */

.loader {
    width: 65px;
    aspect-ratio: 1;
    border-radius: 50%;
    background: 
        radial-gradient(farthest-side, #6b0b7e 94%, #0000) top/8px 8px no-repeat,
        conic-gradient(#0000 30%, #6b0b7e);
    -webkit-mask: radial-gradient(
        farthest-side,
        #0000 calc(100% - 8px),
        #000 0
    );
    animation: l13 1s infinite linear;
}

@keyframes l13 {
    100% {
        transform: rotate(1turn);
    }
}